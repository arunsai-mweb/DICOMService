Instructions for the installation of DICOM Destination Application 

1. Extract the files

2. Open command prompt in admin mode and create a new Folder with any name using following command
          mkdir D:/DICOMService

3. Copy all the extracted folder contents into the newly created folder 

2. Check the system if it is 32 bit or 64 bit OS
     If the system is 32 bit, copy 
   	    Install 32 Bit VC_redist.x86 from D:\DestinationApp\Packages\VC 
	   
	    Open 32 Bit OpenSSL Folder
	   
	    Open D:\DestinationApp\Application\OpenSSL\bin folder.
   
        Run openssl.exe in administation mode.
        
        Create a key and certificate for enabling the tls functionality.
        
        For key generation enter the following command with the key name as:
                  genrsa -out server.key 2048    
	     
        For certificate generation enter the following command with the name as:
                  req -config openssl.cfg -new -x509 -key server.key -out server.crt			 
        
        It will ask some personnal details please enter.
	     		 
        Now a pair of server.key and server.crt will be generated.
        
        cut or copy both the files and paste it outside the folder i.e: Copy in D:\DestinationApp\Application
        
        Along with the server.key and server.crt files keep the client.crt file which is generated at the ClinetApp Side in D:\DestinationApp\Application
	   
	   	32 Bit\nssm.exe from D:\DestinationApp\Packages\NSSM\win32 folder 
		
     If the system is 64 bit, copy 
	 
	    Install 64 Bit VC_redist.x64 from D:\DestinationApp\Packages\VC 
	   
	    Open 64 Bit OpenSSL Folder
	   
	    Open D:\DestinationApp\Application\OpenSSL\bin folder.
   
        Run openssl.exe in administation mode.
        
        Create a key and certificate for enabling the tls functionality.
        
        For key generation enter the following command with the key name as:
                  genrsa -out server.key 2048    
	     
        For certificate generation enter the following command with the name as:
                  req -config openssl.cfg -new -x509 -key server.key -out server.crt			 
        
        It will ask some personnal details please enter.
	     		 
        Now a pair of server.key and server.crt will be generated.
        
        cut or copy both the files and paste it outside the folder i.e: Copy in D:\DestinationApp\Application
        
        Along with the server.key and server.crt files keep the client.crt file which is generated at the ClinetApp Side in D:\DestinationApp\Application
	   
	   	64 Bit\nssm.exe from D:\DestinationApp\Packages\NSSM\win64 folder 
	  

3. Open D:\DestinationApp\Application\DestinationConfigfile

   -> Set the Configurations that are required to run the service
   
	    1) DestinationId     --   Unique id(Number) that is mentioned in the web app. ex:"5353"		
		2) FolderPath        --   The path that the files are saved i.e; "D:/DestinationApp/" 
		3) APIURL            --   Url to the web app should be specified here ex: "https://dicomservice/api/studyapi"
		5) DeleteLogs        --   Specify number of days for deleting the log files ex: 2
        6) DeleteFiles       --   Specify number of days for deleting DICOM files ex: 5	


6. Install DestinationApp Listener 

    ============================================= 
    Set Environment path:

    Go to ControlPanel --> System --> Advanced System Settings --> Environment Variables

    In User Variables

    If PATH is available Edit that PATH and add D:\DestinationApp\Application\NSSM\win32 or win64

    If PATH is not available Click on NEW 

    Provide Variable Name as PATH and Variable Value as  D:\DestinationApp\Application\NSSM\win32 or win64 and click on OK    
    
    =============================================

    On Command Prompt as 'Run as Administrator'

    cd D:\DestinationApp\Application\NSSM\win32 or win64

    nssm install DestinationListener

    We will see one pop. 
    Click Browse button -> Select D:\DestinationApp\Application\storescp.exe and click OK

    Paste the below arguments in the arguments textbox 

    -v -aet DestinationListener 109 +tls server.key server.crt +cf client.crt -od "D:\DestinationApp\DestnationInComing"  

    Now click on InstallService
   
   =============================================
    Open Services as "Run as Administrator" and start the service DestinationListener

